#https://www.cnblogs.com/fsdstudy/p/18316979
#https://github.com/kubevirt/kubevirt?tab=readme-ov-file
#https://kubevirt.io/user-guide/
#https://k8s.huweihuang.com/project/kvm/kubevirt/kubevirt-introduction

1、前提需要支持cpu虚拟化，内核支持kvm
1) dmesg | grep -i virtualization  ====》CPU features: detected: Virtualization Host Extensions ===》ARMv8 的虚拟化扩展（VHE，Virtualization Host Extensions）
2) ls /dev/kvm                     ===》支持kvm
   cat /boot/config-$(uname -r) | grep KVM  
   zcat /proc/config.gz | grep KVM

3) cat /proc/interrupts|grep kvm   ===》支持GIC3
   dmesg |grep -i gic            

如果你的系统上安装了 libvirt，可以使用 virt-host-validate 工具来检查。
virt-host-validate | grep -i cpu
virt-host-validate qemu

2、对于arm64的兼容
https://kubevirt.io/user-guide/cluster_admin/device_status_on_Arm64/
内核必须支持
virtio总线、virtio-net-device等等
CONFIG_VIRTIO=y
CONFIG_VIRTIO_PCI=y
CONFIG_VIRTIO_BLK=y
'''
CONFIG_VIRTIO*全部打开

3、安装必要依赖
qemu-kvm（KVM 用户空间工具）
libvirt（虚拟化管理工具）
virt-install(???)
yum install qemu qemu-system-aarch64 qemu-system-x86_64 libvirt -y
yum install qemu qemu-system-aarch64 qemu-system-x86_64 libvirt --downloadonly --downloaddir=/home/sjw/rpm-virt
  yum remove qemu qemu-system-aarch64 qemu-system-x86_64 libvirt -y
  yum list installed "libvirt*"
  rpm -qa | grep libvirt

systemctl status libvirtd
systemctl start libvirtd
systemctl enable libvirtd

ps：virt 会自动拉起dev-hugepages.mount，需要禁用，不然会影响dpdk。
    systemctl stop dev-hugepages.mount
    systemctl disable dev-hugepages.mount
    检查mount|grep huge   ===》  不能有/dev/hugepages


3、安装kubevirt


